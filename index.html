<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Awab Photography</title>
<style>
body { font-family: 'Arial', sans-serif; margin:0; background:#000; color:#eee; direction:rtl; min-height:100vh; display:flex; flex-direction:column;}
header { background:#000; height:100vh; display:flex; justify-content:center; align-items:center; text-align:center; flex-shrink:0;}
header h1 { font-size:3rem; background: rgba(0,0,0,0.6); padding:20px; border-radius:10px; color:#ffae00;}
main { flex:1 0 auto; max-width:900px; margin:40px auto 40px; padding:0 20px;}
h2 { text-align:center; margin-bottom:20px; color:#ffae00;}
.separator { height:2px; background:#ffae00; margin:15px 0 25px;}
.gallery, .restaurant-gallery { display:grid; grid-template-columns:repeat(auto-fit,minmax(130px,1fr)); gap:10px;}
.gallery img, .restaurant-gallery img { width:100%; aspect-ratio:1/1; object-fit:cover; border-radius:10px; transition: transform 0.3s ease; cursor:pointer;}
.gallery img:hover, .restaurant-gallery img:hover { transform:scale(1.05);}
.restaurant-section { border-top:2px solid #444; padding-top:40px; margin-top:60px;}
.restaurant { margin-bottom:20px; }
.restaurant h3 { font-size:1.8rem; font-weight:bold; color:#ffae00; margin-bottom:15px; border-bottom:2px solid #ffae00; padding-bottom:5px;}
.photographer-section { background:#222; padding:30px 20px; margin-top:40px; border-radius:10px;}
.photographer-section h2 { color:#ffae00; margin-bottom:10px;}
.photographer-section p { color:#ccc; font-size:1rem; margin:5px 0;}
#lightbox { display:none; position:fixed; z-index:9999; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); justify-content:center; align-items:center;}
#lightbox img { max-width:90%; max-height:90%; border-radius:10px; transition: opacity 0.5s ease;}
#close, #prev, #next { position:absolute; color:#ffae00; font-size:2rem; cursor:pointer; user-select:none;}
#close { top:20px; right:30px; }
#prev { top:50%; left:30px; transform:translateY(-50%);}
#next { top:50%; right:30px; transform:translateY(-50%);}
.admin-btn { position:fixed; bottom:20px; left:20px; background:#ffae00; color:#000; padding:10px 15px; border-radius:5px; font-weight:bold; cursor:pointer; z-index:1000;}
@media(max-width:600px){ header h1 { font-size:2rem; padding:15px; } }
</style>
</head>
<body>

<header>
<h1>Awab Photography</h1>
</header>

<main>
<section>
<h2>تشكيلة صور</h2>
<div class="separator"></div>
<div class="gallery">
  <img src="https://images.unsplash.com/photo-1506748686214-e9df14d4d9d0?auto=format&fit=crop&w=800&q=80" alt="صورة 1" />
  <img src="https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=800&q=80" alt="صورة 2" />
  <img src="https://images.unsplash.com/photo-1500534623283-312aade485b7?auto=format&fit=crop&w=800&q=80" alt="صورة 3" />
  <img src="https://images.unsplash.com/photo-1504384308090-c894fdcc538d?auto=format&fit=crop&w=800&q=80" alt="صورة 4" />
  <img src="https://images.unsplash.com/photo-1549388604-817d15aa0110?auto=format&fit=crop&w=800&q=80" alt="صورة 5" />
</div>
</section>

<section class="restaurant-section">
<h2>أعمال في مطاعم</h2>
<div id="restaurants-container"></div>
</section>

<section class="photographer-section">
<h2>حول المصور</h2>
<div class="separator"></div>
<p>أنا مصور فوتوغرافي محترف، أحب التقاط اللحظات الجميلة بأسلوبي الخاص. خبرة أكثر من 5 سنوات في تصوير البورتريه والطبيعة والمناسبات.</p>
<h2>اتصل بي</h2>
<div class="separator"></div>
<p>الهاتف: 97431694343</p>
<p>البريد الإلكتروني: <a href="mailto:awab.albaraa@gmail.com" style="color:#ffae00;">awab.albaraa@gmail.com</a></p>
<p>إنستغرام: <a href="https://instagram.com/awab_hassan_24" target="_blank" style="color:#ffae00;">awab_hassan_24</a></p>
</section>
</main>

<div id="lightbox">
  <span id="close">&times;</span>
  <span id="prev">&#10094;</span>
  <img id="lightbox-img" src="" alt="عرض الصورة" />
  <span id="next">&#10095;</span>
</div>

<div class="admin-btn" onclick="location.href='admin.html'">إدارة الموقع</div>

<script type="module">
// إعداد Firebase
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyDMAk-LMcuwQQL7PWaIRFrRDZ7Tku0MbwA",
  authDomain: "awab-photography-77c9f.firebaseapp.com",
  databaseURL: "https://awab-photography-77c9f-default-rtdb.firebaseio.com",
  projectId: "awab-photography-77c9f",
  storageBucket: "awab-photography-77c9f.appspot.com",
  messagingSenderId: "671706718039",
  appId: "1:671706718039:web:500f8901b4284df5896812",
  measurementId: "G-36TCVGKQK2"
};

// تهيئة Firebase
const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

// عرض المطاعم من قاعدة البيانات
function renderRestaurants(data) {
  const container = document.getElementById('restaurants-container');
  container.innerHTML = '';

  data.forEach(rest => {
    const restDiv = document.createElement('div');
    restDiv.className = 'restaurant';
    const title = document.createElement('h3');
    title.textContent = rest.name;
    restDiv.appendChild(title);

    const gallery = document.createElement('div');
    gallery.className = 'restaurant-gallery';
    rest.images.forEach(imgName => {
      const img = document.createElement('img');
      img.src = imgName; // الرابط الكامل للصورة من Firebase
      img.alt = `${rest.name} صورة`;
      gallery.appendChild(img);
    });

    restDiv.appendChild(gallery);
    container.appendChild(restDiv);
  });

  attachLightbox();
}

// جلب البيانات من Firebase
const restaurantsRef = ref(db, 'restaurants');
onValue(restaurantsRef, (snapshot) => {
  const data = snapshot.val();
  if (data) {
    renderRestaurants(Object.values(data));
  }
});

// عرض الصور في Lightbox
function attachLightbox(){
  const images = document.querySelectorAll('img');
  let currentIndex=0, imagesList=[];
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightbox-img');

  images.forEach((img,i)=>{
    img.onclick=()=>{
      imagesList=Array.from(document.querySelectorAll('img')).map(im=>im.src);
      currentIndex=i;
      showLightbox();
    }
  });

  function showLightbox(){
    lightbox.style.display='flex';
    lightboxImg.style.opacity=0;
    setTimeout(()=>{ lightboxImg.src=imagesList[currentIndex]; lightboxImg.onload=()=>lightboxImg.style.opacity=1; },50);
  }

  function changeImage(offset){
    lightboxImg.style.opacity=0;
    setTimeout(()=>{
      currentIndex=(currentIndex+offset+imagesList.length)%imagesList.length;
      lightboxImg.src=imagesList[currentIndex];
      lightboxImg.onload=()=>lightboxImg.style.opacity=1;
    },300);
  }

  document.getElementById('close').onclick=()=>lightbox.style.display='none';
  document.getElementById('prev').onclick=()=>changeImage(-1);
  document.getElementById('next').onclick=()=>changeImage(1);
}
</script>
</body>
</html>
