<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Awab Photography</title>
<style>
/* ✅ الشريط العلوي */
.topbar {
  position: fixed;
  top: 0;
  right: 0;
  left: 0;
  background: rgba(17, 17, 17, 0.5); /* خلفية شفافة */
  color: #fff; /* النص أبيض */
  padding: 15px 30px;
  text-align: left;   /* الاسم في اليسار */
  font-size: 22px;
  font-weight: bold;
  box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  backdrop-filter: blur(10px);        /* تأثير مشوش */
  -webkit-backdrop-filter: blur(10px);/* دعم سفاري */
  z-index: 2000;
}

/* ✅ لضبط المسافة بين الشريط والمحتوى */
body {
  padding-top: 0px !important;
}

/* ✅ إخفاء العنوان الذهبي القديم */
header h1 {
  display: none !important;
}

/* ================== الخلفية ================== */
body {
  font-family: 'Arial', sans-serif;
  margin:0;
  background:#000;
  color:#eee;
  direction:rtl;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  position: relative;
  overflow-x: hidden;
  padding-top:px; /* عشان المحتوى ما يتغطى بالشريط */
}

/* ===== الشريط العلوي المشوش ===== */
.topbar {
  position: fixed;
  top: 0;
  right: 0;
  left: 0;
  background: rgba(17, 17, 17, 0.5); /* خلفية شفافة */
  color: #fff; /* ✅ الكتابة باللون الأبيض */
  padding: 15px 30px;
  text-align: center;
  font-size: 22px;
  font-weight: bold;
  box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  backdrop-filter: blur(10px); /* ✅ تأثير التشويش */
  -webkit-backdrop-filter: blur(10px); /* دعم سفاري */
  z-index: 2000;
}

/* خلفية كانفس متحركة */
#gold-network {
  position: fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  z-index:-1;
  background:#000;
}

/* ================== التنسيقات الأصلية ================== */
header {
  background:transparent;
  height:10vh;
  display:flex;
  justify-content:center;
  align-items:center;
  text-align:center;
  flex-shrink:0;
}
header h1 {
  font-size:3rem;
  background: rgba(0,0,0,0.6);
  padding:20px;
  border-radius:10px;
  color:#f5f8fa;
}
main {
  flex:1 0 auto;
  max-width:900px;
  margin:40px auto 40px;
  padding:0 20px;
}
h2 {
  text-align:center;
  margin-bottom:20px;
  color:#f3f2ee;
}
.separator {
  height:2px;
  background:#ffff;
  margin:15px 0 25px;
}
.gallery, .restaurant-gallery {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(130px,1fr));
  gap:10px;
  .gallery h2,
.gallery h3,
.gallery p,
.gallery .caption {
  color: #fff;
}

}
.gallery img, .restaurant-gallery img {
  width:100%;
  aspect-ratio:1/1;
  object-fit:cover;
  border-radius:10px;
  transition: transform 0.3s ease;
  cursor:pointer;
}
.gallery img:hover, .restaurant-gallery img:hover {
  transform:scale(1.05);
}
.restaurant-section {
  border-top:2px solid #444;
  padding-top:40px;
  margin-top:60px;
}
.restaurant { margin-bottom:20px; }
.restaurant h3 {
  font-size:1.8rem;
  font-weight:bold;
  color:#ffffff;           /* أسماء المطاعم أبيض */
  margin-bottom:15px;
  border-bottom:2px solid #f7f6f4;
  padding-bottom:5px;
}
.photographer-section {
  background:#222;
  padding:30px 20px;
  margin-top:40px;
  border-radius:10px;
}
.photographer-section h2 { color:#fdfdfd; margin-bottom:10px;}
.photographer-section p { color:#ccc; font-size:1rem; margin:5px 0;}
#lightbox {
  display:none;
  position:fixed;
  z-index:9999;
  top:0; left:0;
  width:100%; height:100%;
  background:rgba(0,0,0,0.9);
  justify-content:center;
  align-items:center;
}
#lightbox img {
  max-width:90%; max-height:90%;
  border-radius:10px;
  transition: transform 0.4s ease, opacity 0.4s ease; /* انتقال */
  opacity: 0;
}
#close, #prev, #next {
  position:absolute;
  color:#ffae00;
  font-size:2rem;
  cursor:pointer;
  user-select:none;
}
#close { top:20px; right:30px; }
#prev { top:50%; left:30px; transform:translateY(-50%);}
#next { top:50%; right:30px; transform:translateY(-50%);}

/* ✅ حالات الانزلاق (عمودي) */
#lightbox img.show { opacity: 1; transform: translateY(0); }
#lightbox img.slide-up { transform: translateY(-30px); }
#lightbox img.slide-down { transform: translateY(30px); }

.admin-btn {
  position:fixed;
  bottom:20px; left:20px;
  background:#ffae00;
  color:#000;
  padding:10px 15px;
  border-radius:5px;
  font-weight:bold;
  cursor:pointer;
  z-index:1000;
}

/* إخفاء أزرار التنقل فقط على الهواتف */
@media (max-width: 768px) {
  #prev, #next { display: none !important; }
}
@media(max-width:600px){
  header h1 { font-size:2rem; padding:15px; }
}

/* ✅ تثبيت محاذاة الاسم لليسار حتى مع تكرار تعريف .topbar */
.topbar { text-align: left !important; }
</style>
</head>
<body>

<!-- ✅ الشريط العلوي المشوش -->
<div class="topbar">
  Awab Photography
</div>

<!-- خلفية ذهبية متحركة -->
<canvas id="gold-network"></canvas>

<header>
  <h1>Awab Photography</h1>
</header>

<main>
  <section>
    <h2>تشكيلة صور</h2>
    <div class="separator"></div>
    <div class="gallery">
      <img src="https://images.unsplash.com/photo-1506748686214-e9df14d4d9d0?auto=format&fit=crop&w=800&q=80" alt="صورة 1" />
      <img src="https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=800&q=80" alt="صورة 2" />
      <img src="https://images.unsplash.com/photo-1500534623283-312aade485b7?auto=format&fit=crop&w=800&q=80" alt="صورة 3" />
      <img src="https://images.unsplash.com/photo-1504384308090-c894fdcc538d?auto=format&fit=crop&w=800&q=80" alt="صورة 4" />
      <img src="https://images.unsplash.com/photo-1549388604-817d15aa0110?auto=format&fit=crop&w=800&q=80" alt="صورة 5" />
    </div>
  </section>

  <section class="restaurant-section">
    <h2>أعمال في مطاعم</h2>
    <div id="restaurants-container"></div>
  </section>

  <section class="photographer-section">
    <h2>حول المصور</h2>
    <div class="separator"></div>
    <p>أنا مصور فوتوغرافي محترف، أحب التقاط اللحظات الجميلة بأسلوبي الخاص. خبرة أكثر من 5 سنوات في تصوير البورتريه والطبيعة والمناسبات.</p>
    <h2>اتصل بي</h2>
    <div class="separator"></div>
    <p>الهاتف: 97431694343</p>
    <p>البريد الإلكتروني: <a href="mailto:awab.albaraa@gmail.com" style="color:#ffae00;">awab.albaraa@gmail.com</a></p>
    <p>إنستغرام: <a href="https://instagram.com/awab_hassan_24" target="_blank" style="color:#ffae00;">awab_hassan_24</a></p>
  </section>
</main>

<!-- ✅ لايت بوكس -->
<div id="lightbox">
  <span id="close">&times;</span>
  <span id="prev">&#10094;</span>
  <img id="lightbox-img" src="" alt="عرض الصورة" />
  <span id="next">&#10095;</span>
</div>

<div class="admin-btn" onclick="location.href='admin.html'">إدارة الموقع</div>

<!-- سكربت الخلفية الذهبية -->
<script>
const canvas = document.getElementById("gold-network");
const ctx = canvas.getContext("2d");
let width, height;
function resizeCanvas() {
  width = canvas.width = window.innerWidth;
  height = canvas.height = window.innerHeight;
}
window.addEventListener("resize", resizeCanvas);
resizeCanvas();

const nodes = [];
const numNodes = 80;
for (let i = 0; i < numNodes; i++) {
  nodes.push({
    x: Math.random() * width,
    y: Math.random() * height,
    vx: (Math.random() - 0.5) * 0.5,
    vy: (Math.random() - 0.5) * 0.5
  });
}

function animate() {
  ctx.clearRect(0, 0, width, height);

  // رسم الخطوط
  for (let i = 0; i < numNodes; i++) {
    for (let j = i + 1; j < numNodes; j++) {
      const dx = nodes[i].x - nodes[j].x;
      const dy = nodes[i].y - nodes[j].y;
      const dist = Math.sqrt(dx * dx + dy * dy);
      if (dist < 150) {
        ctx.strokeStyle = "rgba(255,215,0," + (1 - dist / 150) + ")";
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.moveTo(nodes[i].x, nodes[i].y);
        ctx.lineTo(nodes[j].x, nodes[j].y);
        ctx.stroke();
      }
    }
  }

  // رسم النقاط
  nodes.forEach(n => {
    ctx.fillStyle = "gold";
    ctx.beginPath();
    ctx.arc(n.x, n.y, 2, 0, Math.PI * 2);
    ctx.fill();

    n.x += n.vx;
    n.y += n.vy;

    if (n.x < 0 || n.x > width) n.vx *= -1;
    if (n.y < 0 || n.y > height) n.vy *= -1;
  });

  requestAnimationFrame(animate);
}
animate();
</script>

<!-- سكربت Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

  // ✅ إعدادات Firebase الصحيحة
  const firebaseConfig = {
    apiKey: "AIzaSyDMAk-LMcuwQQL7PWaIRFrRDZ7Tku0MbwA",
    authDomain: "awab-photography-77c9f.firebaseapp.com",
    databaseURL: "https://awab-photography-77c9f-default-rtdb.firebaseio.com",
    projectId: "awab-photography-77c9f",
    storageBucket: "abawab-photography-77c9f.appspot.com",
    messagingSenderId: "671706718039",
    appId: "1:671706718039:web:500f8901b4284df5896812",
    measurementId: "G-36TCVGKQK2"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  const restaurantsContainer = document.getElementById("restaurants-container");

  // جلب البيانات من قاعدة البيانات
  const restaurantsRef = ref(db, "restaurants");
  onValue(restaurantsRef, (snapshot) => {
    restaurantsContainer.innerHTML = "";
    if (snapshot.exists()) {
      const data = snapshot.val();
      Object.keys(data).forEach((key) => {
        const restaurant = data[key];
        const div = document.createElement("div");
        div.className = "restaurant";
        div.innerHTML = `
          <h3>${restaurant.name}</h3>
          <div class="restaurant-gallery">
            ${restaurant.images.map(img => `<img src="${img}" alt="${restaurant.name}" />`).join("")}
          </div>
        `;
        restaurantsContainer.appendChild(div);
      });
    } else {
      restaurantsContainer.innerHTML = "<p>لا توجد مطاعم مضافة بعد.</p>";
    }
  });
</script>

<!-- ✅ سكربت اللايت بوكس + الانزلاق -->
<script>
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightbox-img');
  const prevBtn = document.getElementById('prev');
  const nextBtn = document.getElementById('next');
  const closeBtn = document.getElementById('close');

  let allImages = [];
  let currentIndex = 0;

  function refreshImages() {
    allImages = Array.from(document.querySelectorAll('.gallery img, .restaurant-gallery img'));
  }

  function openLightboxAt(index) {
    refreshImages();
    currentIndex = index;
    lightbox.style.display = 'flex';
    lightboxImg.classList.remove('show','slide-up','slide-down');
    lightboxImg.src = allImages[currentIndex].src;
    requestAnimationFrame(() => lightboxImg.classList.add('show'));
  }

  function changeImage(step) {
    if (!allImages.length) refreshImages();
    const directionClass = step > 0 ? 'slide-up' : 'slide-down';

    // حركة للخارج
    lightboxImg.classList.remove('show','slide-up','slide-down');
    lightboxImg.classList.add(directionClass);

    setTimeout(() => {
      currentIndex = (currentIndex + step + allImages.length) % allImages.length;
      lightboxImg.src = allImages[currentIndex].src;
      // عند تحميل الصورة الجديدة
      lightboxImg.onload = () => {
        lightboxImg.classList.remove('slide-up','slide-down');
        lightboxImg.classList.add('show');
      };
    }, 120);
  }

  function closeLightbox() {
    lightbox.style.display = 'none';
    lightboxImg.classList.remove('show','slide-up','slide-down');
  }

  // فتح عند الضغط على أي صورة (حتى صور المطاعم المحمّلة ديناميكياً)
  document.addEventListener('click', (e) => {
    if (e.target.matches('.gallery img, .restaurant-gallery img')) {
      refreshImages();
      const index = allImages.indexOf(e.target);
      openLightboxAt(Math.max(0, index));
    }
    // إغلاق عند الضغط على الخلفية الداكنة
    if (e.target === lightbox) closeLightbox();
  });

  // الأزرار
  nextBtn.addEventListener('click', () => changeImage(1));
  prevBtn.addEventListener('click', () => changeImage(-1));
  closeBtn.addEventListener('click', closeLightbox);

  // لوحة المفاتيح
  window.addEventListener('keydown', (e) => {
    if (lightbox.style.display === 'flex') {
      if (e.key === 'ArrowRight') changeImage(1);
      if (e.key === 'ArrowLeft') changeImage(-1);
      if (e.key === 'Escape') closeLightbox();
    }
  });
</script>

</body>
</html>
