<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Awab Photography</title>
<style>
/* ... التنسيقات الأصلية كما هي ... */
body { font-family: 'Arial', sans-serif; margin:0; background:#000; color:#eee; direction:rtl; min-height:100vh; display:flex; flex-direction:column;}
header { background:#000; height:100vh; display:flex; justify-content:center; align-items:center; text-align:center; flex-shrink:0;}
header h1 { font-size:3rem; background: rgba(0,0,0,0.6); padding:20px; border-radius:10px; color:#ffae00;}
main { flex:1 0 auto; max-width:900px; margin:40px auto 40px; padding:0 20px;}
h2 { text-align:center; margin-bottom:20px; color:#ffae00;}
.separator { height:2px; background:#ffae00; margin:15px 0 25px;}
.gallery, .restaurant-gallery { display:grid; grid-template-columns:repeat(auto-fit,minmax(130px,1fr)); gap:10px;}
.gallery img, .restaurant-gallery img { width:100%; aspect-ratio:1/1; object-fit:cover; border-radius:10px; transition: transform 0.3s ease; cursor:pointer;}
.gallery img:hover, .restaurant-gallery img:hover { transform:scale(1.05);}
.restaurant-section { border-top:2px solid #444; padding-top:40px; margin-top:60px;}
.restaurant { margin-bottom:20px; }
.restaurant h3 { font-size:1.8rem; font-weight:bold; color:#ffae00; margin-bottom:15px; border-bottom:2px solid #ffae00; padding-bottom:5px;}
.photographer-section { background:#222; padding:30px 20px; margin-top:40px; border-radius:10px;}
.photographer-section h2 { color:#ffae00; margin-bottom:10px;}
.photographer-section p { color:#ccc; font-size:1rem; margin:5px 0;}
#lightbox { display:none; position:fixed; z-index:9999; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); justify-content:center; align-items:center;}
#lightbox img { max-width:90%; max-height:90%; border-radius:10px; transition: opacity 0.5s ease;}
#close, #prev, #next { position:absolute; color:#ffae00; font-size:2rem; cursor:pointer; user-select:none;}
#close { top:20px; right:30px; }
#prev { top:50%; left:30px; transform:translateY(-50%);}
#next { top:50%; right:30px; transform:translateY(-50%);}
.admin-btn { position:fixed; bottom:20px; left:20px; background:#ffae00; color:#000; padding:10px 15px; border-radius:5px; font-weight:bold; cursor:pointer; z-index:1000;}
@media(max-width:600px){ header h1 { font-size:2rem; padding:15px; } }

/* ================== الإضافات الجديدة ================== */
/* إخفاء أزرار التنقل فقط على الهواتف */
@media (max-width: 768px) {
  #prev, #next {
    display: none !important;
  }
}

/* تأثير انتقال الصور */
#lightbox img {
  transition: transform 0.4s ease, opacity 0.4s ease;
  opacity: 0;
}

#lightbox img.show {
  opacity: 1;
  transform: translateY(0);
}

#lightbox img.slide-up {
  transform: translateY(-30px);
}

#lightbox img.slide-down {
  transform: translateY(30px);
}
</style>
</head>
<body>

<header>
<h1>Awab Photography</h1>
</header>

<main>
<section>
<h2>تشكيلة صور</h2>
<div class="separator"></div>
<div class="gallery">
  <img src="https://images.unsplash.com/photo-1506748686214-e9df14d4d9d0?auto=format&fit=crop&w=800&q=80" alt="صورة 1" />
  <img src="https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=800&q=80" alt="صورة 2" />
  <img src="https://images.unsplash.com/photo-1500534623283-312aade485b7?auto=format&fit=crop&w=800&q=80" alt="صورة 3" />
  <img src="https://images.unsplash.com/photo-1504384308090-c894fdcc538d?auto=format&fit=crop&w=800&q=80" alt="صورة 4" />
  <img src="https://images.unsplash.com/photo-1549388604-817d15aa0110?auto=format&fit=crop&w=800&q=80" alt="صورة 5" />
</div>
</section>

<section class="restaurant-section">
<h2>أعمال في مطاعم</h2>
<div id="restaurants-container"></div>
</section>

<section class="photographer-section">
<h2>حول المصور</h2>
<div class="separator"></div>
<p>أنا مصور فوتوغرافي محترف، أحب التقاط اللحظات الجميلة بأسلوبي الخاص. خبرة أكثر من 5 سنوات في تصوير البورتريه والطبيعة والمناسبات.</p>
<h2>اتصل بي</h2>
<div class="separator"></div>
<p>الهاتف: 97431694343</p>
<p>البريد الإلكتروني: <a href="mailto:awab.albaraa@gmail.com" style="color:#ffae00;">awab.albaraa@gmail.com</a></p>
<p>إنستغرام: <a href="https://instagram.com/awab_hassan_24" target="_blank" style="color:#ffae00;">awab_hassan_24</a></p>
</section>
</main>

<div id="lightbox">
  <span id="close">&times;</span>
  <span id="prev">&#10094;</span>
  <img id="lightbox-img" src="" alt="عرض الصورة" />
  <span id="next">&#10095;</span>
</div>

<div class="admin-btn" onclick="location.href='admin.html'">إدارة الموقع</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyDMAk-LMcuwQQL7PWaIRFrRDZ7Tku0MbwA",
  authDomain: "awab-photography-77c9f.firebaseapp.com",
  databaseURL: "https://awab-photography-77c9f-default-rtdb.firebaseio.com",
  projectId: "awab-photography-77c9f",
  storageBucket: "awab-photography-77c9f.appspot.com",
  messagingSenderId: "671706718039",
  appId: "1:671706718039:web:500f8901b4284df5896812"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

const defaultRestaurants = [
  {
    name: "مطعم الإفطار",
    images: ["https://drive.google.com/uc?export=view&id=10xLzydUdcJMdI6WGQXClufuqvfVCWLQZ"]
  },
  {
    name: "مطعم العشاء",
    images: ["https://drive.google.com/uc?export=view&id=10xLzydUdcJMdI6WGQXClufuqvfVCWLQZ"]
  }
];

function renderRestaurants(data) {
  const container = document.getElementById('restaurants-container');
  container.innerHTML = '';

  data.forEach(rest => {
    const restName = rest.name && rest.name.trim() !== "" ? rest.name : "مطعم بدون اسم";
    const restDiv = document.createElement('div');
    restDiv.className = 'restaurant';
    const title = document.createElement('h3');
    title.textContent = restName;
    restDiv.appendChild(title);

    const gallery = document.createElement('div');
    gallery.className = 'restaurant-gallery';

    if (Array.isArray(rest.images)) {
      rest.images.forEach(imgUrl => {
        if (imgUrl && imgUrl.trim() !== "") {
          const img = document.createElement('img');
          img.src = imgUrl;
          img.alt = `${restName} صورة`;
          gallery.appendChild(img);
        }
      });
    }

    restDiv.appendChild(gallery);
    container.appendChild(restDiv);
  });

  attachLightbox();
}

const restaurantRef = ref(db, 'restaurants');
onValue(restaurantRef, snapshot => {
  const data = snapshot.val();
  if (data) {
    renderRestaurants(Object.values(data));
  } else {
    renderRestaurants(defaultRestaurants);
  }
});

function attachLightbox(){
  const images = document.querySelectorAll('.restaurant-gallery img, .gallery img');
  let currentIndex=0; let imagesList=[];
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightbox-img');

  images.forEach((img,i) => {
    img.onclick = () => {
      imagesList = Array.from(document.querySelectorAll('.restaurant-gallery img, .gallery img')).map(im=>im.src);
      currentIndex = i;
      showLightbox();
    }
  });

  function showLightbox(){
    lightbox.style.display = 'flex';
    lightboxImg.src = imagesList[currentIndex];
  }

  document.getElementById('close').onclick = () => lightbox.style.display = 'none';
  document.getElementById('prev').onclick = () => {
    currentIndex = (currentIndex - 1 + imagesList.length) % imagesList.length;
    lightboxImg.src = imagesList[currentIndex];
  };
  document.getElementById('next').onclick = () => {
    currentIndex = (currentIndex + 1) % imagesList.length;
    lightboxImg.src = imagesList[currentIndex];
  };
}

/* ================== الإضافة الجديدة في JS ================== */
(function() {
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightbox-img');
  let touchStartY = 0;
  let currentIndex = 0;
  let imagesList = [];

  document.querySelectorAll('.restaurant-gallery img, .gallery img').forEach((img, i) => {
    img.addEventListener('click', () => {
      imagesList = Array.from(document.querySelectorAll('.restaurant-gallery img, .gallery img')).map(im => im.src);
      currentIndex = i;
      showImage("fade");
    });
  });

  function showImage(direction) {
    lightboxImg.className = "";
    lightboxImg.src = imagesList[currentIndex];
    requestAnimationFrame(() => {
      if (direction === "up") {
        lightboxImg.classList.add("slide-up");
      } else if (direction === "down") {
        lightboxImg.classList.add("slide-down");
      }
      lightboxImg.classList.add("show");
    });
  }

  lightbox.addEventListener("touchstart", e => {
    touchStartY = e.touches[0].clientY;
  });

  lightbox.addEventListener("touchend", e => {
    let touchEndY = e.changedTouches[0].clientY;
    let diffY = touchEndY - touchStartY;

    if (Math.abs(diffY) > 50) {
      if (diffY < 0) { // سحب للأعلى
        currentIndex = (currentIndex + 1) % imagesList.length;
        showImage("up");
      } else { // سحب للأسفل
        currentIndex = (currentIndex - 1 + imagesList.length) % imagesList.length;
        showImage("down");
      }
    }
  });
})();
</script>

</body>
</html>
